// worker设置里面添加变量PSWD(登录密码)
// 基础参数配置
const CONFIG = {
    UUID: '123',       // 管理页面访问路径 域名/sub-uuid
    APITOKEN: '123',       // 管理节点的API路径密钥
    UP: '123',             // 节点上传密钥
    TOKEN: '123',         // 订阅地址密钥
    USER: '123',           // 登录用户名
    DEFAULT_DOMAIN: '',       // 默认即可，无需设置
    EXPIRATION_TIME: 1800,     // 自动上传节点链接有效期(秒), 过期未更新则移除
    MAX_LOGIN_ATTEMPTS: 3,    // 最大登录尝试次数 (前端限制)
    BACKGROUND_IMAGE: 'https://c.53326.com/d/file/lan20191114/atjm2wz3fap.jpg'       // 背景图片，这里不用设置，可以在管理页面设置，支持多张图片
};
const _0x2f1b24=_0x4232;(function(_0x56c9bc,_0x9bbf5d){const _0xda403=_0x4232,_0x501e9b=_0x56c9bc();while(!![]){try{const _0x2610ae=parseInt(_0xda403(0x1d3))/0x1+parseInt(_0xda403(0x1dd))/0x2*(-parseInt(_0xda403(0x1e5))/0x3)+parseInt(_0xda403(0x222))/0x4*(parseInt(_0xda403(0x240))/0x5)+parseInt(_0xda403(0x238))/0x6+-parseInt(_0xda403(0x26e))/0x7+-parseInt(_0xda403(0x246))/0x8*(parseInt(_0xda403(0x21f))/0x9)+parseInt(_0xda403(0x1f9))/0xa;if(_0x2610ae===_0x9bbf5d)break;else _0x501e9b['push'](_0x501e9b['shift']());}catch(_0x14b088){_0x501e9b['push'](_0x501e9b['shift']());}}}(_0x3289,0x60101));const excludeKeywords=_0x2f1b24(0x1e3),PROTOCOL={'xieyi':'vl','xieyi2':'ess','pm':'vm'};class SupabaseClient{constructor(_0x18dbe5,_0xa690a1){const _0x2d58ae=_0x2f1b24;this[_0x2d58ae(0x217)]=_0x18dbe5,this[_0x2d58ae(0x1d8)]=_0xa690a1,this[_0x2d58ae(0x23f)]={'apikey':_0xa690a1,'Authorization':'Bearer\x20'+_0xa690a1,'Content-Type':_0x2d58ae(0x247),'Prefer':_0x2d58ae(0x1db)};}async[_0x2f1b24(0x21e)](_0x22a873,_0xf09752={}){const _0x96161d=_0x2f1b24,_0x234596=await fetch(this[_0x96161d(0x217)]+_0x96161d(0x1d6)+_0x22a873,{'headers':{...this[_0x96161d(0x23f)],..._0xf09752[_0x96161d(0x23f)]},..._0xf09752});if(!_0x234596['ok']){const _0x388f67=await _0x234596[_0x96161d(0x1fc)]();throw new Error('Supabase\x20error:\x20'+_0x234596[_0x96161d(0x25b)]+'\x20'+_0x388f67);}if(_0x234596[_0x96161d(0x25b)]===0xcc)return null;return await _0x234596['json']();}async[_0x2f1b24(0x26f)](_0x5f3439,_0x21bebf='*',_0x59e0f7={},_0xcafbe2=null){const _0x3d52b6=_0x2f1b24;let _0x5dac0c=_0x5f3439+_0x3d52b6(0x23d)+_0x21bebf;return Object[_0x3d52b6(0x249)](_0x59e0f7)[_0x3d52b6(0x1f7)](([_0xd29a55,_0x38ac42])=>{const _0x45fe04=_0x3d52b6;_0x38ac42!==undefined&&_0x38ac42!==null&&(_0x5dac0c+='&'+_0xd29a55+_0x45fe04(0x23e)+encodeURIComponent(_0x38ac42));}),_0xcafbe2&&(_0x5dac0c+=_0x3d52b6(0x255)+_0xcafbe2),await this[_0x3d52b6(0x21e)](_0x5dac0c);}async[_0x2f1b24(0x233)](_0x25c6c2,_0x137f63){const _0x39b49e=_0x2f1b24;return await this['request'](_0x25c6c2,{'method':_0x39b49e(0x225),'body':JSON['stringify'](Array['isArray'](_0x137f63)?_0x137f63:[_0x137f63])});}async[_0x2f1b24(0x1e0)](_0x283c01,_0x2cee53,_0x468c06={}){const _0x58b722=_0x2f1b24;let _0x4322c1=_0x283c01;const _0x4d2377=new URLSearchParams();return Object['entries'](_0x468c06)[_0x58b722(0x1f7)](([_0x1ec60e,_0x1b3e76])=>{const _0x4b8f7d=_0x58b722;_0x1b3e76!==undefined&&_0x1b3e76!==null&&_0x4d2377[_0x4b8f7d(0x26b)](_0x1ec60e,_0x4b8f7d(0x241)+_0x1b3e76);}),_0x4d2377['toString']()&&(_0x4322c1+='?'+_0x4d2377[_0x58b722(0x1f4)]()),await this[_0x58b722(0x21e)](_0x4322c1,{'method':_0x58b722(0x25a),'body':JSON[_0x58b722(0x200)](_0x2cee53)});}async[_0x2f1b24(0x21c)](_0x3847f5,_0x103cdd,_0x9e86c8=['id']){const _0x430e71=_0x2f1b24;return await this[_0x430e71(0x21e)](_0x3847f5,{'method':_0x430e71(0x225),'headers':{'Prefer':_0x430e71(0x209)},'body':JSON[_0x430e71(0x200)](Array['isArray'](_0x103cdd)?_0x103cdd:[_0x103cdd])});}async[_0x2f1b24(0x211)](_0x389c75,_0x392cc8={}){const _0x15cff5=_0x2f1b24;let _0x269d43=_0x389c75;const _0x3670f4=new URLSearchParams();return Object['entries'](_0x392cc8)[_0x15cff5(0x1f7)](([_0x5da88b,_0x73e4b4])=>{const _0x365882=_0x15cff5;_0x73e4b4!==undefined&&_0x73e4b4!==null&&_0x3670f4[_0x365882(0x26b)](_0x5da88b,_0x365882(0x241)+_0x73e4b4);}),_0x3670f4[_0x15cff5(0x1f4)]()&&(_0x269d43+='?'+_0x3670f4['toString']()),await this[_0x15cff5(0x21e)](_0x269d43,{'method':_0x15cff5(0x25d)});}async[_0x2f1b24(0x245)](_0x5b913f,_0x5bb2b7={}){const _0xf71e81=_0x2f1b24;return await this['request'](_0xf71e81(0x1e1)+_0x5b913f,{'method':_0xf71e81(0x225),'body':JSON[_0xf71e81(0x200)](_0x5bb2b7)});}}function preProcessUrl(_0x5ba1f1){const _0x40cffa=_0x2f1b24;_0x5ba1f1['includes'](_0x40cffa(0x21d))&&(_0x5ba1f1=_0x5ba1f1['replace'](/{\n.*?You've hit the daily limit.*?\n}/s,'UN'));let _0x15c495=![];(_0x5ba1f1[_0x40cffa(0x270)]('{BASS}://')||_0x5ba1f1[_0x40cffa(0x270)](PROTOCOL['pm']+_0x40cffa(0x1f8)))&&_0x5ba1f1[_0x40cffa(0x22b)](_0x40cffa(0x224))[0x1][_0x40cffa(0x1e8)](0x0)!=='{'&&(_0x15c495=!![]);if(_0x15c495)try{let _0x455830=_0x5ba1f1[_0x40cffa(0x22b)](_0x40cffa(0x224))[0x1],_0x36fe93=atob(_0x455830),_0x2b8cc2=PROTOCOL['pm']+_0x40cffa(0x1f8)+_0x36fe93;return _0x2b8cc2[_0x40cffa(0x20e)](/\{PASS\}\-/g,'')['replace'](/\{PA/g,PROTOCOL[_0x40cffa(0x1f3)])[_0x40cffa(0x20e)](/SS\}/g,PROTOCOL[_0x40cffa(0x213)])[_0x40cffa(0x20e)](/\{BA/g,PROTOCOL['pm']);}catch(_0x2f08f5){return console['error'](_0x40cffa(0x1f2),_0x2f08f5,_0x5ba1f1),_0x5ba1f1;}else return _0x5ba1f1[_0x40cffa(0x20e)](/\{PASS\}\-/g,'')[_0x40cffa(0x20e)](/\{PA/g,PROTOCOL[_0x40cffa(0x1f3)])[_0x40cffa(0x20e)](/SS\}/g,PROTOCOL[_0x40cffa(0x213)])[_0x40cffa(0x20e)](/\{BA/g,PROTOCOL['pm']);}function shouldExcludeUrl(_0x2081d0){const _0x109ea6=_0x2f1b24,_0x3abf68=(excludeKeywords||'')['split'](';')[_0x109ea6(0x269)](_0x9827cc=>_0x9827cc[_0x109ea6(0x259)]());return _0x3abf68['some'](_0x36a950=>_0x2081d0[_0x109ea6(0x25e)](_0x36a950));}async function initDatabase(_0xbca322){const _0x18ca98=_0x2f1b24,_0xee28e4=new SupabaseClient(_0xbca322[_0x18ca98(0x1f1)],_0xbca322[_0x18ca98(0x236)]);try{await _0xee28e4[_0x18ca98(0x245)](_0x18ca98(0x263)),console[_0x18ca98(0x1ff)](_0x18ca98(0x25c));}catch(_0x493876){console[_0x18ca98(0x1ff)](_0x18ca98(0x205),_0x493876);}}async function getAllUrls(_0x31518b){const _0x58f932=_0x2f1b24,_0x6bf565=new SupabaseClient(_0x31518b[_0x58f932(0x1f1)],_0x31518b[_0x58f932(0x236)]);try{const _0x1849e8=await _0x6bf565['select'](_0x58f932(0x208),_0x58f932(0x253),{},_0x58f932(0x212));return _0x1849e8['filter'](_0x53c395=>_0x53c395[_0x58f932(0x217)]&&typeof _0x53c395[_0x58f932(0x217)]===_0x58f932(0x210)&&!shouldExcludeUrl(_0x53c395[_0x58f932(0x217)]))[_0x58f932(0x269)](_0x2450d8=>({'url':_0x2450d8[_0x58f932(0x217)],'urlName':_0x2450d8[_0x58f932(0x1fb)]}));}catch(_0x568005){return console[_0x58f932(0x232)](_0x58f932(0x22d),_0x568005),[];}}async function getSub2Urls(_0x32502c){const _0x324d57=_0x2f1b24,_0x4b305a=new SupabaseClient(_0x32502c[_0x324d57(0x1f1)],_0x32502c[_0x324d57(0x236)]);try{const _0x14de74=await _0x4b305a[_0x324d57(0x26f)](_0x324d57(0x1ef),'url,\x20id',{},_0x324d57(0x212));return _0x14de74[_0x324d57(0x1de)](_0x315104=>_0x315104['url']&&typeof _0x315104[_0x324d57(0x217)]===_0x324d57(0x210)&&!shouldExcludeUrl(_0x315104['url']))[_0x324d57(0x269)](_0x434a05=>({'url':_0x434a05['url'],'id':_0x434a05['id']}));}catch(_0x33290b){return console[_0x324d57(0x232)](_0x324d57(0x24e),_0x33290b),[];}}async function getExcludeKeywords(_0x16f0fa){const _0x1a556d=_0x2f1b24,_0x5f0c68=new SupabaseClient(_0x16f0fa[_0x1a556d(0x1f1)],_0x16f0fa['SUPABASE_ANON_KEY']);try{const _0x2006df=await _0x5f0c68['select']('exclude_keywords','keyword,\x20id',{},_0x1a556d(0x212));return _0x2006df[_0x1a556d(0x269)](_0x223624=>({'keyword':_0x223624[_0x1a556d(0x216)],'id':_0x223624['id']}));}catch(_0x4ad2b3){return console[_0x1a556d(0x232)](_0x1a556d(0x1d7),_0x4ad2b3),[];}}async function getBackgroundImages(_0x5a0b00){const _0x13ba52=_0x2f1b24,_0x305c77=new SupabaseClient(_0x5a0b00[_0x13ba52(0x1f1)],_0x5a0b00['SUPABASE_ANON_KEY']);try{const _0x3f52f7=await _0x305c77[_0x13ba52(0x26f)]('background_images','image_url,\x20id',{},_0x13ba52(0x212));return _0x3f52f7[_0x13ba52(0x269)](_0x1e3b53=>({'imageUrl':_0x1e3b53[_0x13ba52(0x1ee)],'id':_0x1e3b53['id']}));}catch(_0x3b4843){return console[_0x13ba52(0x232)](_0x13ba52(0x257),_0x3b4843),[];}}const html='<!DOCTYPE\x20html>\x0a<html\x20lang=\x22en\x22>\x0a<head>\x0a\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20\x20\x20<title>订阅管理</title>\x0a\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Arial\x27,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-image:\x20url(\x27\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-size:\x20cover;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-position:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-repeat:\x20no-repeat;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x20100vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(255,\x20255,\x20255,\x200.75);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2010px\x20rgba(0,0,0,0.3);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20900px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x201px\x201px\x202px\x20rgba(0,0,0,0.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.password-form\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-row\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-label\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2060px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20right;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-input\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20200px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-sizing:\x20border-box;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.info-box\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(248,\x20249,\x20250,\x200.75);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#dee2e6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20input[type=\x22password\x22],\x20input[type=\x22text\x22],\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#ddd;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20calc(100%\x20-\x2024px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20border-color\x200.3s,\x20box-shadow\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20box-sizing:\x20border-box;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20input[type=\x22password\x22]:focus,\x20input[type=\x22text\x22]:focus,\x20textarea:focus{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20#007bff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x205px\x20rgba(0,123,255,0.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x20120px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20monospace;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#007bff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s,\x20transform\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20button:disabled\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#cccccc;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20not-allowed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20button:hover:not(:disabled)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#0056b3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-2px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.url\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20word-break:\x20break-all;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x2010px\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(233,\x20236,\x20239,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.copy-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#28a745;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s,\x20transform\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.copy-btn:hover:not(:disabled)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#218838;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-2px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.current-list,\x20.current-sub2-list,\x20.current-keyword-list{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x20350px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.list-item,\x20.sub2-item,\x20.keyword-item{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(248,\x20249,\x20250,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#dee2e6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.item-index\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-width:\x2040px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#007bff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.list-url,\x20.sub2-url,\x20.keyword-text\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-grow:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20word-break:\x20break-all;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.delete-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#dc3545;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x208px\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s,\x20transform\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.delete-btn:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#c82333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-2px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.management-section\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#dee2e6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.success-message\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#28a745;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.error-message\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#dc3545;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.menu\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-around;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-wrap:\x20wrap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.menu\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#007bff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s,\x20transform\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.menu\x20button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#0056b3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-2px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.tab-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.tab-content.active\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20#loading\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20.copyright\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#777;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20/*\x20背景图片管理样式\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20.background-preview\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20grid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20grid-template-columns:\x20repeat(auto-fill,\x20minmax(200px,\x201fr));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x20400px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.background-item\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#dee2e6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#f8f9fa;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.background-item\x20img\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x20150px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20object-fit:\x20cover;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.background-item-controls\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(255,\x20255,\x20255,\x200.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.background-item-url\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2011px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#666;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20white-space:\x20nowrap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.use-bg-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#17a2b8;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x204px\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.use-bg-btn:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#138496;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.delete-bg-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#dc3545;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x204px\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.delete-bg-btn:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#c82333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.image-url-input\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20.upload-section\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(248,\x20249,\x20250,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20</style>\x0a</head>\x0a<body>\x0a\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h1>节点自动上传聚合订阅管理系统</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22password-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22form-label\x22>用户名</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22username\x22\x20class=\x22form-input\x22\x20placeholder=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22form-label\x22>密码</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22password\x22\x20id=\x22password\x22\x20class=\x22form-input\x22\x20placeholder=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22login()\x22\x20id=\x22loginBtn\x22>登陆</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22loading\x22>Loading...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22errorMessage\x22\x20class=\x22error-message\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22infoBox\x22\x20class=\x22info-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22menu\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22showTab(\x27home\x27)\x22>首页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22showTab(\x27upload\x27)\x22>自动上传节点管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22showTab(\x27sub2\x27)\x22>自定义节点或链接</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22showTab(\x27keywords\x27)\x22>关键词过滤</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22showTab(\x27backgrounds\x27)\x22>背景图片管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22home\x22\x20class=\x22tab-content\x20active\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>节点上传地址格式(UP值改成你设置的):</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22url\x22\x20id=\x22uploadUrl\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22copy-btn\x22\x20onclick=\x22copyToClipboard(\x27uploadUrl\x27)\x22>复制</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>订阅地址格式(TOKEN值改成你设置的):</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22url\x22\x20id=\x22downloadUrl\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22copy-btn\x22\x20onclick=\x22copyToClipboard(\x27downloadUrl\x27)\x22>复制</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>使用说明:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ol>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>节点原始优选域名要设置为ip.sb,端口443或8443,否则也不影响使用,只是不支持自动更换优选IP和端口</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>订阅链接参数:cf_ip和cf_port必填,可以自动替换优选域名和端口</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>默认支持v2r.ayng,hid.dify,neko等软件,其他软件自行转换格式</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ol>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22upload\x22\x20class=\x22tab-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>当前节点列表:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22currentList\x22\x20class=\x22current-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22loadUrls()\x22\x20class=\x22load-btn\x22>刷新列表</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllUrls()\x22\x20class=\x22delete-btn\x22>全部删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22sub2\x22\x20class=\x22tab-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>添加自定义节点或订阅链接(仅v2格式):</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22sub2Input\x22\x20placeholder=\x22每行一个URL\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22updateSub2()\x22>添加更新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22sub2SuccessMessage\x22\x20class=\x22success-message\x22>更新成功!</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>当前自定义节点列表:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22currentSub2List\x22\x20class=\x22current-sub2-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22loadSub2()\x22\x20class=\x22load-btn\x22>刷新列表</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllSub2Urls()\x22\x20class=\x22delete-btn\x22>全部删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22keywords\x22\x20class=\x22tab-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>添加关键词过滤:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22keywordInput\x22\x20placeholder=\x22每行一个关键词\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22updateKeywords()\x22>添加更新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22keywordSuccessMessage\x22\x20class=\x22success-message\x22>更新成功!</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>当前关键词列表:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22currentKeywordList\x22\x20class=\x22current-keyword-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22loadKeywords()\x22\x20class=\x22load-btn\x22>刷新列表</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllKeywords()\x22\x20class=\x22delete-btn\x22>全部删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22backgrounds\x22\x20class=\x22tab-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>背景图片管理</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22upload-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>添加背景图片URL:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22backgroundUrlInput\x22\x20class=\x22image-url-input\x22\x20placeholder=\x22输入图片URL，例如：https://example.com/image.jpg\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22addBackgroundImage()\x22>添加图片</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22backgroundSuccessMessage\x22\x20class=\x22success-message\x22>添加成功!</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22backgroundErrorMessage\x22\x20class=\x22error-message\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x2012px;\x20color:\x20#666;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20提示：支持直接图片URL（jpg、png、gif等），推荐使用图床或CDN链接\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>当前背景图片列表:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22backgroundPreview\x22\x20class=\x22background-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-top:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22loadBackgrounds()\x22\x20class=\x22load-btn\x22>刷新列表</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllBackgrounds()\x22\x20class=\x22delete-btn\x22>全部删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22copyright\x22>版权所有:FsMs\x20©\x20Copyright\x202025</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20配置参数\x20-\x20登录成功后从服务器获取\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20appConfig\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20apiToken:\x20\x27\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20maxAttempts:\x203,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20backgroundImages:\x20[]\x0a\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20currentBackgroundIndex\x20=\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20loginAttempts\x20=\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20isLoggedIn\x20=\x20false;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20页面加载时预加载背景图片配置\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20preloadBackgroundConfig()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/get-background-images`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20data\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(data.images\x20&&\x20data.images.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20appConfig.backgroundImages\x20=\x20data.images;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20initBackground();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20如果数据库没有图片，尝试使用CONFIG中的后备图片\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20fallbackImages\x20=\x20await\x20fetch(`${getDomain()}/get-background-config`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(fallbackImages.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20fallbackData\x20=\x20await\x20fallbackImages.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(fallbackData.backgroundImages\x20&&\x20fallbackData.backgroundImages.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20appConfig.backgroundImages\x20=\x20fallbackData.backgroundImages;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20initBackground();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Failed\x20to\x20load\x20background\x20config:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20function\x20setBackgroundImage(imageUrl)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.body.style.backgroundImage\x20=\x20`url(\x27${imageUrl}\x27)`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20function\x20loadNextBackground()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(appConfig.backgroundImages.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentBackgroundIndex\x20=\x20(currentBackgroundIndex\x20+\x201)\x20%\x20appConfig.backgroundImages.length;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setBackgroundImage(appConfig.backgroundImages[currentBackgroundIndex]);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20function\x20handleImageError()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20loadNextBackground()\x0a\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20function\x20initBackground()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(appConfig.backgroundImages.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20randomIndex\x20=\x20Math.floor(Math.random()\x20*\x20appConfig.backgroundImages.length);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20currentBackgroundIndex\x20=\x20randomIndex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20imageUrl\x20=\x20appConfig.backgroundImages[randomIndex];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20img\x20=\x20new\x20Image();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.onload\x20=\x20()\x20=>\x20setBackgroundImage(imageUrl);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.onerror\x20=\x20handleImageError;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.src\x20=\x20imageUrl;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20showTab(tabId)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20tabs\x20=\x20[\x27home\x27,\x20\x27upload\x27,\x20\x27sub2\x27,\x20\x27keywords\x27,\x20\x27backgrounds\x27];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tabs.forEach(id\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(id).classList.remove(\x27active\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(tabId).classList.add(\x27active\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20如果切换到背景图片管理标签，加载背景图片列表\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(tabId\x20===\x20\x27backgrounds\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loadBackgrounds();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20getDomain()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20window.location.origin;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20function\x20showLoading(show)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20loadingDiv\x20=\x20document.getElementById(\x27loading\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loadingDiv.style.display\x20=\x20show\x20?\x20\x27block\x27\x20:\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20async\x20function\x20login()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20username\x20=\x20document.getElementById(\x27username\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20password\x20=\x20document.getElementById(\x27password\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20errorMsg\x20=\x20document.getElementById(\x27errorMessage\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20loginBtn\x20=\x20document.getElementById(\x27loginBtn\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(isLoggedIn){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27infoBox\x27).style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showLoading(true);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loginBtn.disabled\x20=\x20true;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/login`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x27Content-Type\x27:\x20\x27application/json\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20username,\x20password\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20data\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(data.success){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20isLoggedIn\x20=\x20true;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20appConfig.apiToken\x20=\x20data.config.apiToken;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20appConfig.maxAttempts\x20=\x20data.config.maxAttempts\x20||\x203;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20从数据库加载背景图片\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20preloadBackgroundConfig();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.querySelector(\x27.password-form\x27).style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27infoBox\x27).style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showTab(\x27home\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20domain\x20=\x20getDomain();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27uploadUrl\x27).textContent\x20=\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20`${domain}/upload-你设置的UP值`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27downloadUrl\x27).textContent\x20=\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20`${domain}/token=你设置的TOKEN值?cf_ip=ip.sb&cf_port=443`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20Promise.all([loadSub2(),\x20loadUrls(),\x20loadKeywords()]);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loginAttempts++;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20remainingAttempts\x20=\x20(data.maxAttempts\x20||\x203)\x20-\x20loginAttempts;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(loginAttempts\x20>=\x20(data.maxAttempts\x20||\x203))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27登录尝试次数已用完,请稍后再试\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loginBtn.disabled\x20=\x20true;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27username\x27).disabled\x20=\x20true;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27password\x27).disabled\x20=\x20true;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20`用户名或密码错误,还剩\x20${remainingAttempts}\x20次尝试机会`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27登录失败,请重试\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}catch(error){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27网络错误,请重试\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20finally\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showLoading(false);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loginBtn.disabled\x20=\x20false;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20function\x20copyToClipboard(elementId)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20text\x20=\x20document.getElementById(elementId).textContent;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20navigator.clipboard.writeText(text).then(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27已复制到剪贴板\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}).catch(err\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27复制失败:\x27,\x20err);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20上传节点管理\x20-\x20使用服务器下发的apiToken\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20loadUrls()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/get-urls-${appConfig.apiToken}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20data\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listContainer\x20=\x20document.getElementById(\x27currentList\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.innerHTML\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(data.urls\x20&&\x20data.urls.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data.urls.forEach((item,\x20index)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listItem\x20=\x20document.createElement(\x27div\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listItem.className\x20=\x20\x27list-item\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20indexSpan\x20=\x20document.createElement(\x27span\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20indexSpan.className\x20=\x20\x27item-index\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20indexSpan.textContent\x20=\x20(index\x20+\x201)\x20+\x20\x27.\x27;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20urlSpan\x20=\x20document.createElement(\x27span\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.className\x20=\x20\x27list-url\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.textContent\x20=\x20item.urlName;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20deleteBtn\x20=\x20document.createElement(\x27button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.className\x20=\x20\x27delete-btn\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.textContent\x20=\x20\x27删除\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.onclick\x20=\x20()\x20=>\x20deleteUrl(item.urlName);\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listItem.appendChild(indexSpan);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listItem.appendChild(urlSpan);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listItem.appendChild(deleteBtn);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.appendChild(listItem);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.textContent\x20=\x20\x27当前没有节点\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Error\x20loading\x20URLs:\x27,\x20response.statusText);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listContainer\x20=\x20document.getElementById(\x27currentList\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.textContent\x20=\x20\x27加载节点列表失败!\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteUrl(urlName)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-url-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20urlName\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadUrls();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteAllUrls(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-all-urls-${appConfig.apiToken}`,{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadUrls();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27全部删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20updateSub2()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20content\x20=\x20document.getElementById(\x27sub2Input\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20lines\x20=\x20content.split(\x27\x5cn\x27).filter(url\x20=>\x20url.trim());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20验证格式:任意字符://任意字符\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20urlPattern\x20=\x20/^.+:\x5c/\x5c/.+$/;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20validUrls\x20=\x20[];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20invalidUrls\x20=\x20[];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20lines.forEach(line\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20trimmed\x20=\x20line.trim();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(urlPattern.test(trimmed))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20validUrls.push(trimmed);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20invalidUrls.push(trimmed);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20如果有无效格式,提示用户\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(invalidUrls.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27以下内容格式不正确(需要\x20协议://内容\x20格式):\x5cn\x27\x20+\x20invalidUrls.join(\x27\x5cn\x27));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(validUrls.length\x20===\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(validUrls.length\x20===\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27没有有效的链接可添加\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/update-sub2-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20urls:\x20validUrls\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20successMsg\x20=\x20document.getElementById(\x27sub2SuccessMessage\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20successMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x20successMsg.style.display\x20=\x20\x27none\x27;\x20},\x203000);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadSub2();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27sub2Input\x27).value\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27更新失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20async\x20function\x20loadSub2()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/get-sub2-${appConfig.apiToken}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20data\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listContainer\x20=\x20document.getElementById(\x27currentSub2List\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.innerHTML\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(data.urls\x20&&\x20data.urls.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data.urls.forEach((item,\x20index)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20sub2Item\x20=\x20document.createElement(\x27div\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sub2Item.className\x20=\x20\x27sub2-item\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20indexSpan\x20=\x20document.createElement(\x27span\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20indexSpan.className\x20=\x20\x27item-index\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20indexSpan.textContent\x20=\x20(index\x20+\x201)\x20+\x20\x27.\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20urlSpan\x20=\x20document.createElement(\x27span\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.className\x20=\x20\x27sub2-url\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.textContent\x20=\x20item.url;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20deleteBtn\x20=\x20document.createElement(\x27button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.className\x20=\x20\x27delete-btn\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.textContent\x20=\x20\x27删除\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.onclick\x20=\x20()\x20=>\x20deleteSub2Url(item.id);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sub2Item.appendChild(indexSpan);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sub2Item.appendChild(urlSpan);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sub2Item.appendChild(deleteBtn);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.appendChild(sub2Item);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.textContent\x20=\x20\x27当前没有自定义节点\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Error\x20loading\x20sub2\x20URLs:\x27,\x20response.statusText);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listContainer\x20=\x20document.getElementById(\x27currentSub2List\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.textContent\x20=\x20\x27加载自定义节点列表失败!\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteSub2Url(id)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-sub2-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20id\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadSub2();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteAllSub2Urls(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-all-sub2-${appConfig.apiToken}`,{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadSub2();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27全部删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20关键词过滤管理\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20updateKeywords()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20content\x20=\x20document.getElementById(\x27keywordInput\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20keywords\x20=\x20content.split(\x27\x5cn\x27).filter(keyword\x20=>\x20keyword.trim());\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/update-keywords-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20keywords\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20successMsg\x20=\x20document.getElementById(\x27keywordSuccessMessage\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20successMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x20successMsg.style.display\x20=\x20\x27none\x27;\x20},\x203000);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27keywordInput\x27).value\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadKeywords();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27更新失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20loadKeywords()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/get-keywords-${appConfig.apiToken}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20data\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listContainer\x20=\x20document.getElementById(\x27currentKeywordList\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.innerHTML\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(data.keywords\x20&&\x20data.keywords.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data.keywords.forEach((item,\x20index)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20itemDiv\x20=\x20document.createElement(\x27div\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20itemDiv.className\x20=\x20\x27keyword-item\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20keywordSpan\x20=\x20document.createElement(\x27span\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20keywordSpan.className\x20=\x20\x27keyword-text\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20keywordSpan.textContent\x20=\x20item.keyword;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20deleteBtn\x20=\x20document.createElement(\x27button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.className\x20=\x20\x27delete-btn\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.textContent\x20=\x20\x27删除\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.onclick\x20=\x20()\x20=>\x20deleteKeyword(item.id);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20itemDiv.appendChild(keywordSpan);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20itemDiv.appendChild(deleteBtn);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.appendChild(itemDiv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.textContent\x20=\x20\x27当前没有关键词\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Error\x20loading\x20keywords:\x27,\x20response.statusText);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20listContainer\x20=\x20document.getElementById(\x27currentKeywordList\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20listContainer.textContent\x20=\x20\x27加载关键词列表失败!\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteKeyword(id)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-keyword-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20id\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadKeywords();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteAllKeywords(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-all-keywords-${appConfig.apiToken}`,{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadKeywords();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27全部删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20背景图片管理函数\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20addBackgroundImage()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20urlInput\x20=\x20document.getElementById(\x27backgroundUrlInput\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20imageUrl\x20=\x20urlInput.value.trim();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20successMsg\x20=\x20document.getElementById(\x27backgroundSuccessMessage\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20errorMsg\x20=\x20document.getElementById(\x27backgroundErrorMessage\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20successMsg.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!imageUrl)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27请输入图片URL\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20简单的URL格式验证\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!imageUrl.startsWith(\x27http://\x27)\x20&&\x20!imageUrl.startsWith(\x27https://\x27))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27URL必须以http://或https://开头\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/add-background-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20imageUrl\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20successMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x20successMsg.style.display\x20=\x20\x27none\x27;\x20},\x203000);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlInput.value\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadBackgrounds();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20preloadBackgroundConfig();\x20//\x20重新加载背景配置\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27添加失败,请重试\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.textContent\x20=\x20\x27网络错误,请重试\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20errorMsg.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20loadBackgrounds()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/get-backgrounds-${appConfig.apiToken}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20data\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20container\x20=\x20document.getElementById(\x27backgroundPreview\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20container.innerHTML\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(data.images\x20&&\x20data.images.length\x20>\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data.images.forEach((item)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20itemDiv\x20=\x20document.createElement(\x27div\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20itemDiv.className\x20=\x20\x27background-item\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20img\x20=\x20document.createElement(\x27img\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.src\x20=\x20item.imageUrl;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.alt\x20=\x20\x27背景图片\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.onerror\x20=\x20function()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20this.src\x20=\x20\x27data:image/svg+xml,%3Csvg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x22200\x22\x20height=\x22150\x22%3E%3Crect\x20fill=\x22%23ddd\x22\x20width=\x22200\x22\x20height=\x22150\x22/%3E%3Ctext\x20fill=\x22%23999\x22\x20x=\x2250%25\x22\x20y=\x2250%25\x22\x20text-anchor=\x22middle\x22\x20dy=\x22.3em\x22%3E加载失败%3C/text%3E%3C/svg%3E\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20controls\x20=\x20document.createElement(\x27div\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20controls.className\x20=\x20\x27background-item-controls\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20urlSpan\x20=\x20document.createElement(\x27span\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.className\x20=\x20\x27background-item-url\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.textContent\x20=\x20item.imageUrl;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20urlSpan.title\x20=\x20item.imageUrl;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20useBtn\x20=\x20document.createElement(\x27button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20useBtn.className\x20=\x20\x27use-bg-btn\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20useBtn.textContent\x20=\x20\x27使用\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20useBtn.onclick\x20=\x20()\x20=>\x20useBackground(item.imageUrl);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20deleteBtn\x20=\x20document.createElement(\x27button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.className\x20=\x20\x27delete-bg-btn\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.textContent\x20=\x20\x27删除\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteBtn.onclick\x20=\x20()\x20=>\x20deleteBackground(item.id);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20controls.appendChild(urlSpan);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20controls.appendChild(useBtn);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20controls.appendChild(deleteBtn);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20itemDiv.appendChild(img);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20itemDiv.appendChild(controls);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20container.appendChild(itemDiv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20container.innerHTML\x20=\x20\x27<p\x20style=\x22text-align:center;color:#666;\x22>暂无背景图片</p>\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Error\x20loading\x20backgrounds:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20useBackground(imageUrl)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setBackgroundImage(imageUrl);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27背景已应用！\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteBackground(id)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!confirm(\x27确定要删除这张背景图片吗？\x27))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-background-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20id\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadBackgrounds();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20preloadBackgroundConfig();\x20//\x20重新加载背景配置\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27网络错误,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20deleteAllBackgrounds()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!confirm(\x27确定要删除所有背景图片吗？此操作不可恢复！\x27))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`${getDomain()}/delete-all-backgrounds-${appConfig.apiToken}`,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20loadBackgrounds();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20preloadBackgroundConfig();\x20//\x20重新加载背景配置\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27删除失败,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27网络错误,请重试\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27username\x27).addEventListener(\x27keypress\x27,\x20function(e)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(e.key\x20===\x20\x27Enter\x27\x20&&\x20!this.disabled)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20login();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27password\x27).addEventListener(\x27keypress\x27,\x20function(e)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(e.key\x20===\x20\x27Enter\x27\x20&&\x20!this.disabled)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20login();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20if(isLoggedIn){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27infoBox\x27).style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20页面加载时就加载背景图\x0a\x20\x20\x20\x20\x20\x20\x20\x20preloadBackgroundConfig();\x0a\x20\x20\x20\x20</script>\x0a</body>\x0a</html>';export default{async 'fetch'(_0x7a2b44,_0x7493b8){return handleRequest(_0x7a2b44,_0x7493b8);}};async function handleRequest(_0x40713c,_0x45d037){const _0x2f8ad5=_0x2f1b24,_0x272462=new URL(_0x40713c[_0x2f8ad5(0x217)]),_0x57b9a9=_0x272462[_0x2f8ad5(0x22e)];await initDatabase(_0x45d037);if(_0x57b9a9==='/'||_0x57b9a9==='')return new Response(_0x2f8ad5(0x227),{'headers':{'content-type':_0x2f8ad5(0x237)}});if(_0x57b9a9===_0x2f8ad5(0x271)&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleLogin(_0x40713c,_0x45d037);if(_0x57b9a9===_0x2f8ad5(0x214))return new Response(JSON['stringify']({'backgroundImages':(CONFIG[_0x2f8ad5(0x20b)]||'')['split'](';')[_0x2f8ad5(0x1de)](_0x3e3d52=>_0x3e3d52[_0x2f8ad5(0x259)]())}),{'headers':{'Content-Type':_0x2f8ad5(0x247)}});if(_0x57b9a9===_0x2f8ad5(0x26c))return handleGetBackgroundImagesPublic(_0x45d037);if(_0x57b9a9===_0x2f8ad5(0x219)+CONFIG['UUID'])return new Response(html,{'headers':{'content-type':_0x2f8ad5(0x204)}});if(_0x57b9a9===_0x2f8ad5(0x21a)+CONFIG['UP']&&_0x40713c[_0x2f8ad5(0x26d)]==='POST')return handleUpload(_0x40713c,_0x45d037);else{if(_0x57b9a9==='/token='+CONFIG[_0x2f8ad5(0x235)])return handleToken(_0x40713c,_0x45d037);else{if(_0x57b9a9==='/update-sub2-'+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleUpdateSub2(_0x40713c,_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x1f5)+CONFIG['APITOKEN'])return handleGetSub2(_0x45d037);else{if(_0x57b9a9==='/delete-sub2-'+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleDeleteSub2(_0x40713c,_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x24a)+CONFIG[_0x2f8ad5(0x264)])return handleGetUrls(_0x45d037);else{if(_0x57b9a9==='/delete-url-'+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleDeleteUrl(_0x40713c,_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x207)+CONFIG['APITOKEN']&&_0x40713c['method']===_0x2f8ad5(0x225))return handleUpdateKeywordsRequest(_0x40713c,_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x1dc)+CONFIG[_0x2f8ad5(0x264)])return handleGetKeywordsRequest(_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x1ea)+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleDeleteKeyword(_0x40713c,_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x221)+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleDeleteAllUrls(_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x243)+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c['method']===_0x2f8ad5(0x225))return handleDeleteAllSub2Urls(_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x250)+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c['method']===_0x2f8ad5(0x225))return handleDeleteAllKeywords(_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x23a)+CONFIG['APITOKEN']&&_0x40713c[_0x2f8ad5(0x26d)]===_0x2f8ad5(0x225))return handleAddBackground(_0x40713c,_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x1d5)+CONFIG[_0x2f8ad5(0x264)])return handleGetBackgrounds(_0x45d037);else{if(_0x57b9a9===_0x2f8ad5(0x206)+CONFIG[_0x2f8ad5(0x264)]&&_0x40713c[_0x2f8ad5(0x26d)]==='POST')return handleDeleteBackground(_0x40713c,_0x45d037);else return _0x57b9a9===_0x2f8ad5(0x26a)+CONFIG['APITOKEN']&&_0x40713c['method']===_0x2f8ad5(0x225)?handleDeleteAllBackgrounds(_0x45d037):new Response(_0x2f8ad5(0x248),{'status':0x194});}}}}}}}}}}}}}}}}async function handleLogin(_0xd07d3d,_0x4c934c){const _0x3615c5=_0x2f1b24,{username:_0x4e3b7c,password:_0x378c2e}=await _0xd07d3d[_0x3615c5(0x258)](),_0x154443=_0x4c934c[_0x3615c5(0x220)],_0xdf4123=CONFIG['USER'];if(_0x4e3b7c===_0xdf4123&&_0x378c2e===_0x154443)return new Response(JSON[_0x3615c5(0x200)]({'success':!![],'config':{'apiToken':CONFIG[_0x3615c5(0x264)],'maxAttempts':CONFIG[_0x3615c5(0x226)],'backgroundImage':CONFIG[_0x3615c5(0x20b)]}}),{'headers':{'Content-Type':_0x3615c5(0x247)}});return new Response(JSON[_0x3615c5(0x200)]({'success':![],'maxAttempts':CONFIG[_0x3615c5(0x226)]}),{'headers':{'Content-Type':'application/json'},'status':0x191});}async function handleGetBackgroundImagesPublic(_0x5cac03){const _0x3cc443=_0x2f1b24,_0x1acd3b=await getBackgroundImages(_0x5cac03);return new Response(JSON[_0x3cc443(0x200)]({'images':_0x1acd3b[_0x3cc443(0x269)](_0x2f79ce=>_0x2f79ce['imageUrl'])}),{'headers':{'Content-Type':_0x3cc443(0x247)}});}async function handleAddBackground(_0xf85476,_0x332d78){const _0xb6d9b8=_0x2f1b24,_0x4fe9f0=new SupabaseClient(_0x332d78['SUPABASE_URL'],_0x332d78[_0xb6d9b8(0x236)]),{imageUrl:_0x5b7ba5}=await _0xf85476[_0xb6d9b8(0x258)]();if(!_0x5b7ba5)return new Response(_0xb6d9b8(0x1da),{'status':0x190});try{return await _0x4fe9f0[_0xb6d9b8(0x233)](_0xb6d9b8(0x21b),{'image_url':_0x5b7ba5}),new Response('OK',{'status':0xc8});}catch(_0x15c4dc){return console['error'](_0xb6d9b8(0x244),_0x15c4dc),new Response(_0xb6d9b8(0x1d2),{'status':0x1f4});}}async function handleGetBackgrounds(_0x593f49){const _0x1deab2=_0x2f1b24,_0x131b65=await getBackgroundImages(_0x593f49);return new Response(JSON[_0x1deab2(0x200)]({'images':_0x131b65}),{'headers':{'Content-Type':_0x1deab2(0x247)}});}async function handleDeleteBackground(_0x4eefb3,_0x5026f3){const _0x4c1cb4=_0x2f1b24,_0x3f3637=new SupabaseClient(_0x5026f3[_0x4c1cb4(0x1f1)],_0x5026f3[_0x4c1cb4(0x236)]),{id:_0x4e7474}=await _0x4eefb3[_0x4c1cb4(0x258)]();try{return await _0x3f3637[_0x4c1cb4(0x211)](_0x4c1cb4(0x21b),{'id':_0x4e7474}),new Response('OK',{'status':0xc8});}catch(_0x3a5ecd){return console[_0x4c1cb4(0x232)](_0x4c1cb4(0x260),_0x3a5ecd),new Response(_0x4c1cb4(0x223),{'status':0x1f4});}}async function handleDeleteAllBackgrounds(_0xc2d1fe){const _0x184dc9=_0x2f1b24,_0x414760=new SupabaseClient(_0xc2d1fe[_0x184dc9(0x1f1)],_0xc2d1fe[_0x184dc9(0x236)]);try{return await _0x414760[_0x184dc9(0x245)](_0x184dc9(0x1fa)),new Response('OK',{'status':0xc8});}catch(_0x34f363){return console[_0x184dc9(0x232)](_0x184dc9(0x20c),_0x34f363),new Response(_0x184dc9(0x1ec),{'status':0x1f4});}}async function handleDeleteKeyword(_0x2930ee,_0x48d84c){const _0x1b04da=_0x2f1b24,_0x3f7244=new SupabaseClient(_0x48d84c[_0x1b04da(0x1f1)],_0x48d84c['SUPABASE_ANON_KEY']),{id:_0x5287f3}=await _0x2930ee['json']();try{return await _0x3f7244['delete'](_0x1b04da(0x23c),{'id':_0x5287f3}),new Response('OK',{'status':0xc8});}catch(_0x1e3e4d){return console[_0x1b04da(0x232)]('Error\x20delete\x20keywords:',_0x1e3e4d),new Response(_0x1b04da(0x215),{'status':0x1f4});}}async function handleGetKeywordsRequest(_0x33654d){const _0x324e4c=_0x2f1b24,_0x52315a=await getExcludeKeywords(_0x33654d);return new Response(JSON[_0x324e4c(0x200)]({'keywords':_0x52315a}),{'headers':{'Content-Type':_0x324e4c(0x247)}});}async function handleUpdateKeywordsRequest(_0x1ae836,_0xf579c9){const _0x3423b4=_0x2f1b24,_0x4618f4=new SupabaseClient(_0xf579c9[_0x3423b4(0x1f1)],_0xf579c9[_0x3423b4(0x236)]),{keywords:_0x37178b}=await _0x1ae836[_0x3423b4(0x258)]();if(!Array[_0x3423b4(0x266)](_0x37178b))return new Response('Invalid\x20keywords\x20format',{'status':0x190});try{const _0x56204f=await getExcludeKeywords(_0xf579c9),_0x3d74b0=new Set(_0x56204f['map'](_0x382b9f=>_0x382b9f[_0x3423b4(0x216)])),_0x1d8a46=_0x37178b['filter'](_0x5674cb=>!_0x3d74b0['has'](_0x5674cb));if(_0x1d8a46['length']>0x0){const _0x530630=_0x1d8a46[_0x3423b4(0x269)](_0x18ff3c=>({'keyword':_0x18ff3c}));await _0x4618f4[_0x3423b4(0x233)](_0x3423b4(0x23c),_0x530630);}return new Response('OK',{'status':0xc8});}catch(_0x235bc9){return console[_0x3423b4(0x232)](_0x3423b4(0x201),_0x235bc9),new Response('Error\x20updating\x20keywords',{'status':0x1f4});}}function _0x4232(_0x3cb374,_0x1e2b4c){_0x3cb374=_0x3cb374-0x1d2;const _0x3289d9=_0x3289();let _0x423287=_0x3289d9[_0x3cb374];return _0x423287;}async function handleDeleteAllKeywords(_0x454845){const _0x3fc4bd=_0x2f1b24,_0x4e46d4=new SupabaseClient(_0x454845['SUPABASE_URL'],_0x454845[_0x3fc4bd(0x236)]);try{return await _0x4e46d4[_0x3fc4bd(0x245)](_0x3fc4bd(0x1f6)),new Response('OK',{'status':0xc8});}catch(_0x4d8538){return console[_0x3fc4bd(0x232)](_0x3fc4bd(0x1e6),_0x4d8538),new Response(_0x3fc4bd(0x24c),{'status':0x1f4});}}async function handleGetUrls(_0x55992c){const _0x3f7650=_0x2f1b24,_0x1637b4=await getAllUrls(_0x55992c);return new Response(JSON[_0x3f7650(0x200)]({'urls':_0x1637b4}),{'headers':{'Content-Type':_0x3f7650(0x247)}});}async function handleDeleteUrl(_0x301d70,_0x2b88d8){const _0x2582b0=_0x2f1b24,_0xdbc48=new SupabaseClient(_0x2b88d8[_0x2582b0(0x1f1)],_0x2b88d8[_0x2582b0(0x236)]),{urlName:_0xcda14a}=await _0x301d70[_0x2582b0(0x258)]();try{return await _0xdbc48[_0x2582b0(0x211)](_0x2582b0(0x208),{'url_name':_0xcda14a}),new Response('OK',{'status':0xc8});}catch(_0x35bcff){return console[_0x2582b0(0x232)](_0x2582b0(0x24f),_0x35bcff),new Response('Error\x20delete\x20urls',{'status':0x1f4});}}async function handleDeleteAllUrls(_0x20f587){const _0xf2ac60=_0x2f1b24,_0x454c4d=new SupabaseClient(_0x20f587['SUPABASE_URL'],_0x20f587[_0xf2ac60(0x236)]);try{return await _0x454c4d[_0xf2ac60(0x245)](_0xf2ac60(0x1ed)),new Response('OK',{'status':0xc8});}catch(_0x187376){return console[_0xf2ac60(0x232)](_0xf2ac60(0x231),_0x187376),new Response(_0xf2ac60(0x229),{'status':0x1f4});}}function _0x3289(){const _0x497a9f=['SUPABASE_ANON_KEY','text/plain','1992192dCjSsq','id,\x20url','/add-background-','<html>','exclude_keywords','?select=','=eq.','headers','1953895NXmysE','eq.','https://','/delete-all-sub2-','Error\x20adding\x20background\x20image:','rpc','16eTLled','application/json','Not\x20Found','entries','/get-urls-','length','Error\x20delete\x20all\x20keywords','YOUXUAN_IP','Error\x20getting\x20SUB2\x20URLs:','Error\x20delete\x20urls:','/delete-all-keywords-','Error\x20delete\x20sub2_urls:','now','url_name,\x20url','<!doctype\x20html>','&order=','Error\x20in\x20handleUpload','Error\x20getting\x20background\x20images:','json','trim','PATCH','status','Database\x20tables\x20initialized\x20successfully.','DELETE','includes','cf_ip','Error\x20deleting\x20background\x20image:','Error\x20encoding\x20to\x20base64:','dns.alidns.com/dns-query','init_tables','APITOKEN','Error\x20in\x20encodeToBase64:','isArray','cf.130519.xyz','concat','map','/delete-all-backgrounds-','append','/get-background-images','method','1371790XjUpnw','select','startsWith','/login','Error\x20adding\x20background\x20image','601320FeacXo','ip.sb','/get-backgrounds-','/rest/v1/','Error\x20getting\x20exclude\x20keywords:','anonKey','join','Missing\x20imageUrl','return=representation','/get-keywords-','12076JYyiob','filter','订阅链接失效,返回了HTML页面,跳过:','update','rpc/','Error\x20delete\x20expired\x20urls:','DTW-信息.com;DTW-信息.tw','Invalid\x20URLs\x20format','63LhLIzI','Error\x20delete\x20all\x20keywords:','<head>','charAt','http://','/delete-keyword-','trimStart','Error\x20deleting\x20all\x20background\x20images','delete_all_urls','image_url','sub2_urls','some','SUPABASE_URL','Error\x20decoding\x20special\x20format\x20URL:','xieyi','toString','/get-sub2-','delete_all_keywords','forEach','ess://','249960LOkMmJ','delete_all_background_images','url_name','text','=none','fromCharCode','log','stringify','Error\x20updating\x20keywords:','saas.sin.fan','EXPIRATION_TIME','text/html;charset=UTF-8','Tables\x20might\x20already\x20exist\x20or\x20RPC\x20function\x20not\x20available:','/delete-background-','/update-keywords-','urls','resolution=merge-duplicates,return=representation','toLowerCase','BACKGROUND_IMAGE','Error\x20deleting\x20all\x20background\x20images:','Error\x20updating\x20sub2_urls','replace','8080','string','delete','id.asc','xieyi2','/get-background-config','Error\x20delete\x20keywords','keyword','url','{BASS}://','/sub-','/upload-','background_images','upsert','You\x27ve\x20hit\x20the\x20daily\x20limit','request','2847987GerqTS','PSWD','/delete-all-urls-','4yBlmCj','Error\x20deleting\x20background\x20image','://','POST','MAX_LOGIN_ATTEMPTS','Hello\x20World','Error\x20updating\x20sub2_urls:','Error\x20delete\x20all\x20urls','get','split','Error\x20encodeToBase64','Error\x20getting\x20all\x20URLs:','pathname','443','<body>','Error\x20delete\x20all\x20urls:','error','insert','delete_expired_urls','TOKEN'];_0x3289=function(){return _0x497a9f;};return _0x3289();}async function handleDeleteSub2(_0x4b0216,_0x451c80){const _0x4c0e96=_0x2f1b24,_0x5db098=new SupabaseClient(_0x451c80[_0x4c0e96(0x1f1)],_0x451c80['SUPABASE_ANON_KEY']),{id:_0x5a5148}=await _0x4b0216[_0x4c0e96(0x258)]();try{return await _0x5db098[_0x4c0e96(0x211)](_0x4c0e96(0x1ef),{'id':_0x5a5148}),new Response('OK',{'status':0xc8});}catch(_0xf1f5c9){return console[_0x4c0e96(0x232)](_0x4c0e96(0x251),_0xf1f5c9),new Response('Error\x20delete\x20sub2_urls',{'status':0x1f4});}}async function handleDeleteAllSub2Urls(_0x3087b1){const _0xbe7d1d=_0x2f1b24,_0xcc499c=new SupabaseClient(_0x3087b1[_0xbe7d1d(0x1f1)],_0x3087b1[_0xbe7d1d(0x236)]);try{return await _0xcc499c[_0xbe7d1d(0x245)]('delete_all_sub2_urls'),new Response('OK',{'status':0xc8});}catch(_0x1ed055){return console[_0xbe7d1d(0x232)]('Error\x20delete\x20all\x20sub2_urls:',_0x1ed055),new Response('Error\x20delete\x20all\x20sub2_urls',{'status':0x1f4});}}async function handleUpdateSub2(_0x53b358,_0x3f25a5){const _0x5b59b1=_0x2f1b24,_0x58afdc=new SupabaseClient(_0x3f25a5[_0x5b59b1(0x1f1)],_0x3f25a5['SUPABASE_ANON_KEY']),{urls:_0x5b8879}=await _0x53b358[_0x5b59b1(0x258)]();if(!Array[_0x5b59b1(0x266)](_0x5b8879))return new Response(_0x5b59b1(0x1e4),{'status':0x190});try{const _0x4cd0e1=await getSub2Urls(_0x3f25a5),_0x452503=new Set(_0x4cd0e1['map'](_0x58b4db=>_0x58b4db[_0x5b59b1(0x217)])),_0x2ca5d5=_0x5b8879[_0x5b59b1(0x269)](_0x19294b=>preProcessUrl(_0x19294b))['filter'](_0x311a86=>!shouldExcludeUrl(_0x311a86))[_0x5b59b1(0x1de)](_0x3f2727=>!_0x452503['has'](_0x3f2727));if(_0x2ca5d5[_0x5b59b1(0x24b)]>0x0){const _0x25a539=_0x2ca5d5[_0x5b59b1(0x269)](_0xf3a0f9=>({'url':_0xf3a0f9}));await _0x58afdc[_0x5b59b1(0x233)]('sub2_urls',_0x25a539);}return new Response('OK',{'status':0xc8});}catch(_0x5e254c){return console[_0x5b59b1(0x232)](_0x5b59b1(0x228),_0x5e254c),new Response(_0x5b59b1(0x20d),{'status':0x1f4});}}async function handleGetSub2(_0x525d41){const _0x56785d=_0x2f1b24,_0x20d9bb=await getSub2Urls(_0x525d41);return new Response(JSON['stringify']({'urls':_0x20d9bb}),{'headers':{'Content-Type':_0x56785d(0x247)}});}async function handleUpload(_0x4bc29c,_0x2eee1a){const _0x2e1c0b=_0x2f1b24,_0x4dc40d=new SupabaseClient(_0x2eee1a['SUPABASE_URL'],_0x2eee1a[_0x2e1c0b(0x236)]),{URL_NAME:_0x2e96ca,URL:_0x115873}=await _0x4bc29c[_0x2e1c0b(0x258)]();if(!_0x2e96ca||!_0x115873)return new Response('Missing\x20URL_NAME\x20or\x20URL',{'status':0x190});let _0x11db10=preProcessUrl(_0x115873);if(shouldExcludeUrl(_0x11db10))return new Response('OK',{'status':0xc8});try{const _0x59039d=Date[_0x2e1c0b(0x252)](),_0x1c3d06=CONFIG[_0x2e1c0b(0x203)],_0x4a8a72=await _0x4dc40d[_0x2e1c0b(0x26f)](_0x2e1c0b(0x208),_0x2e1c0b(0x239),{'url_name':_0x2e96ca});if(_0x4a8a72&&_0x4a8a72['length']>0x0){const _0x15bf04=_0x4a8a72[0x0];_0x15bf04[_0x2e1c0b(0x217)]!==_0x11db10?await _0x4dc40d[_0x2e1c0b(0x1e0)]('urls',{'url':_0x11db10,'last_update':_0x59039d},{'id':_0x15bf04['id']}):await _0x4dc40d[_0x2e1c0b(0x1e0)](_0x2e1c0b(0x208),{'last_update':_0x59039d},{'id':_0x15bf04['id']});}else await _0x4dc40d[_0x2e1c0b(0x233)]('urls',{'url_name':_0x2e96ca,'url':_0x11db10,'last_update':_0x59039d,'expiration_ttl':_0x1c3d06});return new Response('OK',{'status':0xc8});}catch(_0x5ceccb){return console['error']('Error\x20in\x20handleUpload:',_0x5ceccb),new Response(_0x2e1c0b(0x256),{'status':0x1f4});}}async function handleToken(_0x3e3092,_0x358b09){const _0x1d6618=_0x2f1b24,_0x3ac9a6=new SupabaseClient(_0x358b09[_0x1d6618(0x1f1)],_0x358b09[_0x1d6618(0x236)]),{searchParams:_0x42a7a9}=new URL(_0x3e3092['url']),_0x511677=_0x42a7a9[_0x1d6618(0x22a)](_0x1d6618(0x25f))||_0x1d6618(0x202),_0x2c37ee=_0x42a7a9['get']('cf_port')||_0x1d6618(0x22f),_0x2ba23d=_0x42a7a9[_0x1d6618(0x22a)]('dns')||_0x1d6618(0x262);try{const _0x4c0fd2=Date[_0x1d6618(0x252)]()-CONFIG[_0x1d6618(0x203)]*0x3e8;await _0x3ac9a6['rpc'](_0x1d6618(0x234),{'expired_time':_0x4c0fd2});}catch(_0x375d89){console[_0x1d6618(0x232)](_0x1d6618(0x1e2),_0x375d89);}let _0x54146=await getAllUrls(_0x358b09);_0x54146=_0x54146[_0x1d6618(0x269)](_0x3d3fb9=>_0x3d3fb9[_0x1d6618(0x217)]);const _0x312cd6=await getSub2Urls(_0x358b09);_0x54146=_0x54146[_0x1d6618(0x268)](_0x312cd6[_0x1d6618(0x269)](_0x39734c=>_0x39734c[_0x1d6618(0x217)]));const _0x1bec8d=await getExcludeKeywords(_0x358b09),_0x3f6eb0=_0x54146['filter'](_0x56f30f=>!_0x1bec8d[_0x1d6618(0x1f0)](_0x2ded86=>_0x56f30f[_0x1d6618(0x25e)](_0x2ded86['keyword'])));_0x54146=_0x3f6eb0[_0x1d6618(0x269)](_0x1af191=>{const _0x19b773=_0x1d6618;return _0x1af191=_0x1af191['replace'](/(dns\.alidns\.com|1\.12\.12\.12)\/dns-query/g,_0x2ba23d),_0x1af191['includes'](_0x19b773(0x24d))||_0x1af191[_0x19b773(0x25e)](_0x19b773(0x1d4))||_0x1af191[_0x19b773(0x25e)](_0x19b773(0x202))||_0x1af191[_0x19b773(0x25e)](_0x19b773(0x267))?(_0x1af191=_0x1af191[_0x19b773(0x20e)](/YOUXUAN_IP|ip\.sb|saas\.sin\.fan|cf\.130519\.xyz/g,_0x511677)[_0x19b773(0x20e)](/\b(443|8443)\b/g,_0x2c37ee)[_0x19b773(0x20e)](/CF_PORT/g,_0x2c37ee),(_0x2c37ee==='80'||_0x2c37ee===_0x19b773(0x20f))&&(_0x1af191=_0x1af191[_0x19b773(0x20e)](/=tls/g,_0x19b773(0x1fd))[_0x19b773(0x20e)](/tls\",/g,'\x22,'))):_0x1af191=_0x1af191['replace'](/YOUXUAN_IP|ip\.sb|saas\.sin\.fan|cf\.130519\.xyz/g,_0x511677)[_0x19b773(0x20e)](/CF_PORT/g,_0x2c37ee),_0x1af191;}),_0x54146=_0x54146[_0x1d6618(0x269)](_0x4e5eab=>{const _0x5c6423=_0x1d6618;if(_0x4e5eab[_0x5c6423(0x270)](_0x5c6423(0x218))||_0x4e5eab[_0x5c6423(0x270)](PROTOCOL['pm']+'ess://')){const _0x599528=_0x4e5eab[_0x5c6423(0x22b)](_0x5c6423(0x224))[0x1];if(_0x599528){const _0x16a8ca=_0x599528[_0x5c6423(0x1eb)]()[_0x5c6423(0x1e8)](0x0);if(_0x16a8ca==='{'){let _0x59e62b=_0x4e5eab['split'](_0x5c6423(0x224))[0x1],_0x2fb6a8=btoa(_0x59e62b);return PROTOCOL['pm']+'ess://'+_0x2fb6a8;}}}return _0x4e5eab;});let _0x247b34=[];for(const _0x2f508f of _0x54146){if(_0x2f508f[_0x1d6618(0x20a)]()[_0x1d6618(0x270)](_0x1d6618(0x1e9))||_0x2f508f['toLowerCase']()[_0x1d6618(0x270)](_0x1d6618(0x242)))try{const _0x1a1ca7=await fetch(_0x2f508f);let _0x546f65=await _0x1a1ca7[_0x1d6618(0x1fc)]();const _0x3aea4f=_0x205cc1=>{const _0x5b5aaf=_0x1d6618,_0xc59acc=_0x205cc1[_0x5b5aaf(0x20a)]()[_0x5b5aaf(0x259)]();return _0xc59acc[_0x5b5aaf(0x25e)](_0x5b5aaf(0x23b))||_0xc59acc[_0x5b5aaf(0x25e)](_0x5b5aaf(0x254))||_0xc59acc[_0x5b5aaf(0x25e)](_0x5b5aaf(0x1e7))||_0xc59acc[_0x5b5aaf(0x25e)](_0x5b5aaf(0x230));};if(_0x3aea4f(_0x546f65)){console[_0x1d6618(0x1ff)](_0x1d6618(0x1df),_0x2f508f);continue;}try{_0x546f65=atob(_0x546f65);}catch(_0x23a158){}const _0x45c6f4=_0x546f65['split']('\x0a')[_0x1d6618(0x1de)](_0x36abb1=>_0x36abb1[_0x1d6618(0x259)]())[_0x1d6618(0x1de)](_0x43e6c8=>!_0x1bec8d['some'](_0x1c18f5=>_0x43e6c8['includes'](_0x1c18f5[_0x1d6618(0x216)])));_0x247b34=_0x247b34['concat'](_0x45c6f4);}catch(_0x43147f){console[_0x1d6618(0x232)]('处理订阅链接失败:',_0x43147f);}else _0x247b34['push'](_0x2f508f);}let _0x14a01e=_0x247b34[_0x1d6618(0x1d9)]('\x0a'),_0x311b0a;try{_0x311b0a=encodeToBase64(_0x14a01e);}catch(_0x2b49d3){return console['error'](_0x1d6618(0x265),_0x2b49d3),new Response('Error\x20in\x20encodeToBase64',{'status':0x1f4});}if(_0x311b0a===null)return new Response(_0x1d6618(0x22c),{'status':0x1f4});return new Response(_0x311b0a,{'headers':{'Content-Type':'text/plain'}});}function encodeToBase64(_0x2ae419){const _0x241bee=_0x2f1b24;try{const _0x594787=new TextEncoder(),_0x545a51=_0x594787['encode'](_0x2ae419);let _0x808e47='';return _0x545a51[_0x241bee(0x1f7)](_0x12fda1=>{const _0x2b4648=_0x241bee;_0x808e47+=String[_0x2b4648(0x1fe)](_0x12fda1);}),btoa(_0x808e47);}catch(_0x3d6f37){return console['error'](_0x241bee(0x261),_0x3d6f37),null;}}